<!doctype html>
<html lang="en" ng-app="case" ng-controller="ctl">
  <head>
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <title>Case and Associates</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://s3.amazonaws.com/caseusa/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <style>
      body {background-color: rgb(73, 70, 70);}
      .container-fluid {
        opacity: 0;
        background: white;
        max-width: 1080px;
        box-shadow: 0px 0px 20px black;
        transition: all 0.5s ease-in-out;
        padding-bottom: 30px;}

      .case-logo div {vertical-align: middle;}
      .case-logo h1 {
        display: inline-block;
        font-weight: bolder;
        font-family: 'Times New Roman', Times, serif;
        border-bottom: 1px solid black;}
      .case-logo h5 {
        margin: 0; padding: 0;
        font-family: Arial, Helvetica, sans-serif;}

      .banner-image {
        background-color: black;
        text-align: center;
        border-bottom: 30px solid #E33526;}

      .screen {
        display: none;
        position: fixed;
        top: 0; left: 0;
        width: 100%;
        background: rgba(66, 9, 5, 0.7);}

      .popup-window {
        display: none;
        text-align: center;
        margin: 2em auto;
        background: white;
        width: 90%;
        height: 85%;
        max-width: 720px;
        position: relative;
        overflow: hidden;}

      .floorplan {
        position: absolute;
        top: 50px; left: 0;
        margin: 6px auto 0;
        height: 90%;
        width: 100%;}
      div[class="floorplan start"],
      div[class="floorplan"] {
        -webkit-transform: translate3d(130%, 0, 0);
        transform:translate3d(130%, 0, 0);}
      .floorplan img {
        width: 100%;
        height: auto;}

      .archives h3 {
        color: #ffffff;
        background-color: #E33526;
        text-align: center;
        line-height: 2em;}
      .archives div { padding: 15px; }
      .archives .btn { margin-bottom: 3px; }
      .archives svg {
        transform: translateY(5px) rotateZ(90deg);}


      .exit span:hover {cursor: pointer;}


      .content {
        width: 80%;
        margin: 30px auto;}
      .content p, .content li {font-weight: bold;}
      .content form p {margin-top: 30px;}
      .content ul { margin: 15px auto; }
      .form-inline .form-control {width: 420px;}


      .properties h5 {color: black; font-weight: bold;}
      .properties h3 {
        font-weight: bold; 
        color:white; 
        background-color: #E33526; 
        line-height: 2em;
        margin: 0;}
      .properties button {background-color: #E33526; color: white;}
      .properties div {text-align: center;}
      .popup {padding: 0 0 30px 0;}
      .popup:hover {cursor: pointer;}
      .popup #prop-1:hover {cursor: default;}
      .popup .btn { margin-top: 15px; }
      .prop {
        margin: 0;
        background: #E33526;
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center top;
        border-radius: 50%;
        border: 4px solid #E33526;}

      
      iframe { display: none; }
      iframe#video { display: block; }
      #referModal iframe {display: block;}
      .glyphicon {font-size: 18pt;}
      ul {margin: 0 30px;}


      .amenities {
        border: solid 6px #E33526;
        box-shadow: inset 0 0 10px #E33526;
        margin-top: 15px;
        padding-bottom: 12px;
        padding-top: 12px;
        overflow: scroll;}
      .amenities li {
        font-style: normal;
        color: black;
        text-align: left;}
      .fa-mouse-pointer {margin: 50% 0 0 50%;}




      @media only screen and (max-width: 768px) {
        .col-xs-12 {width: 33.333%;}
        input[type="text"] {width: 100%;}
        input[type="submit"] {margin-top: 15px;}
        .form-inline .form-control {width: 100%;}
      }



      @media only screen and (max-width: 420px) {
        .content { width: 100%; }
        .col-xs-12 {width: 100%;}
        .popup > div > div {padding: 40px !important;}
      }
    </style>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111744299-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-111744299-1');
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
  </head>
  <body>
    <div class="container-fluid">
      <div class="case-logo row" style="padding:12px; text-align:center;">
        <img width="120" src="http://s3.amazonaws.com/caseusa/assets/img/caseCubeLogo.svg">
        <div style="display:inline-block; text-align:center;">
          <h1>Case &amp; Associates</h1>
          <h5>commercial properties</h5>
        </div>
      </div>

      <div class="banner-image row">
        <iframe id="video" style="width: 100%; height: 420px;" src="https://www.youtube.com/embed/5DqtxH4Ebqk?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
      </div>
      
      <div class="content">
        <p style="font-size:1.5rem;">
          ##firstname##,<br>
          <br>
          We know location is key to your clients which is why we pride ourselves in our properties. From landscaping and maintenance to GREAT locations and continued investment, Case &amp; Associates makes sure their locations are just what youâ€™re clients are looking for. Let us know which location we can impress you with.
        </p>
      </div>

      <div class="properties row">
        <div class="col-xs-12 col-sm-6 popup">
          <div id="prop-1">
            <h3>Featured Tenant</h3>
            <div style="padding:5%;">
              <div class="prop" style="background-image:url(https://s3.amazonaws.com/caseusa/assets/img/tenant-1.jpg)" onclick="window.open('http://afrique-caribb-foods-meat.business.site/', '_blank')">
                <i class="fa fa-mouse-pointer" style="font-size:36px; color:yellow;"></i>
              </div>
            </div>
            
            <h3>Afrique Caribb Foods &amp; Meat</h3>
            <div style="border: solid 6px #E33526; box-shadow: inset 0 0 10px #E33526; margin: 15px 30px;">
              <p style="text-align: left; padding: 12px;">This month we'd like to introduce you to Afrique Caribb Foods who specializes in authentic African and Caribbean beverages, foods and spices.</p>
              <ul style="text-align: left;">
                <li>Jerky seasonings in Hot, Mild and Spicy flavors</li>
                <li>Gluten Free Flour, Legumes and fiber rich whole grains</li>
                <li>Beverages such as Ginger Beer, Ting, Vita Malt made from barley</li>
                <li>African Fabrics</li>
                <li>Plantain chips among other snacks</li>
              </ul>
              <p style="text-align: left; padding: 12px;">
                <label>Website:</label>
                <a target="_blank" href="http://afrique-caribb-foods-meat.business.site/"> http://afrique-caribb-foods-meat.business.site/</a>
                <br>
                <label>Phone:</label> (918) 806-8600
                <br>
                <label>Address:</label> 12206 East 51st Street, Ste #104, Tulsa, OK 74146
              </p>
            </div>
          </div>
        </div>

        <div class="col-xs-12 col-sm-6 popup">
          <div id="prop-2">
            <h3>Featured Property</h3>
            <div style="padding:5%;">
              <div class="prop" style="background-image:url(http://admin.caseusacommercial.com/Images/Park_Towers_outside2.jpg)">
                <i class="fa fa-mouse-pointer" style="font-size:36px; color:yellow;"></i>
              </div>
            </div>
            
            <h3>Park Tower</h3>
            <ul class="amenities">
              <li>Security card access system</li>
              <li>On-site snack shop</li>
              <li>On-site gym</li>
              <li>Interior outgoing mailboxes</li>
              <li>Climate control</li>
              <li>Building conference room</li>
              <li>Free abundant lighted parking</li>
              <li>On-site bank facilities w/ATM</li>
              <li>Magnificent view of LaFortune Golf Course</li>
              <li>First-class, professional management and strong ownership</li>
            </ul>
          </div>
          <button class="btn btn-default" data-toggle="modal" ng-click="initform('Park Tower', 1)" data-target="#tourModal">Request a Tour</button>
        </div>
      </div>

      <div class="row archives">
        <h3>Archives</h3>
        <div class="featured-properties">
          <label>Featured Properties</label>
          <svg height="20" width="20">
            <polygon points="10,0 20,20 0,20" style="fill: #E33526;" />
          </svg>
          <button class="btn btn-default prop-1">Southern Hills</button>
          <button class="btn btn-default prop-3">Richmond Plaza</button>
          <button class="btn btn-default prop-2">Park Tower</button>
        </div>
        <div class="featured-tenants">
          <label>Featured Tenants</label>
          <svg height="20" width="20">
            <polygon points="10,0 20,20 0,20" style="fill: #E33526;" />
          </svg>
        </div>
      </div>


      <!-- Modal -->
      <div class="modal fade" id="tourModal" role="dialog">
        <div class="modal-dialog">
        
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" id="close-modal" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title"></h4>
            </div>
            <div class="modal-body">
              <span class="glyphicon glyphicon-refresh"></span>
            </div>
          </div>
          
        </div>
      </div>

    </div> <!-- END CONTAINER-FLUID /-->

    <div class="screen">
      <div class="popup-window" id="propertyA">
        <div style="text-align:center; position:absolute; top:0; left:0; width:100%; padding: 12px 0; background:#1f99eb; color:white;">
          <span>Southern Hills</span>
        </div>
        <div class="floorplan start">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/southernHills-floorplan-1.jpg">
        </div>
        <div class="floorplan">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/southernHills-floorplan-2.jpg">
        </div>
        <div class="floorplan">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/southernHills-floorplan-3.jpg">
        </div>
        <div class="floorplan">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/southernHills-floorplan-4.jpg">
        </div>
        <div class="floorplan end inView">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/SouthernHills.jpg">
        </div>

        <div class="controls" style="position:absolute; bottom:0; left:0; width:100%;">
          <div class="row">
            <div class="col-xs-4">
              <a href="#" class="control">
                <span class="glyphicon glyphicon-chevron-left" data-prop="propertyA" data-direction="left"></span>
              </a>
            </div>
            <div class="exit col-xs-4" style="text-align:center; padding: 12px 0; background:#1f99eb; color:white;">
              <span>Close</span>
            </div>
            <div class="col-xs-4">
              <a href="#" class="control">
                <span class="glyphicon glyphicon-chevron-right" data-prop="propertyA" data-direction="right"></span>
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="popup-window" id="propertyB">
        <div style="text-align:center; position:absolute; top:0; left:0; width:100%; padding: 12px 0; background:#1f99eb; color:white;">
          <span>Park Towers</span>
        </div>
        <div class="floorplan start">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/parkTower-floorplan-0.jpg">
        </div>
        <div class="floorplan">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/parkTower-floorplan-1.jpg">
        </div>
        <div class="floorplan">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/parkTower-floorplan-2.jpg">
        </div>
        <div class="floorplan">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/parkTower-floorplan-3.jpg">
        </div>
        <div class="floorplan">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/parkTower-floorplan-4.jpg">
        </div>
        <div class="floorplan end inView">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/parkTower-floorplan-5.jpg">
        </div>
        
        <div class="controls" style="position:absolute; bottom:0; left:0; width:100%;">
          <div class="row">
            <div class="col-xs-4">
              <a href="#" class="control">
                <span class="glyphicon glyphicon-chevron-left" data-prop="propertyB" data-direction="left"></span>
              </a>
            </div>
            <div class="exit col-xs-4" style="text-align:center; padding: 12px 0; background:#1f99eb; color:white;">
              <span>Close</span>
            </div>
            <div class="col-xs-4">
              <a href="#" class="control">
                <span class="glyphicon glyphicon-chevron-right" data-prop="propertyB" data-direction="right"></span>
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="popup-window" id="propertyC">
        <div style="text-align:center; position:absolute; top:0; left:0; width:100%; padding: 12px 0; background:#1f99eb; color:white;">
          <span>Richmond Plaza</span>
        </div>
        <div class="floorplan start">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/richmond-floorplan-0.jpg">
        </div>
        <div class="floorplan">
            <img src="http://s3.amazonaws.com/caseusa/assets/img/richmond-floorplan-1.jpg">
          </div>
        <div class="floorplan">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/richmond-floorplan-2.jpg">
        </div>
        <div class="floorplan">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/richmond-floorplan-3.jpg">
        </div>
        <div class="floorplan">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/richmond-floorplan-4.jpg">
        </div>
        <div class="floorplan end inView">
          <img src="http://s3.amazonaws.com/caseusa/assets/img/Richmond.jpg">
        </div>
        
        <div class="controls" style="position:absolute; bottom:0; left:0; width:100%;">
          <div class="row">
            <div class="col-xs-4">
              <a href="#" class="control">
                <span class="glyphicon glyphicon-chevron-left" data-prop="propertyC" data-direction="left"></span>
              </a>
            </div>
            <div class="exit col-xs-4" style="text-align:center; padding: 12px 0; background:#1f99eb; color:white;">
              <span>Close</span>
            </div>
            <div class="col-xs-4">
              <a href="#" class="control">
                <span class="glyphicon glyphicon-chevron-right" data-prop="propertyC" data-direction="right"></span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div style="display:none;">
      <iframe id="browser" ng-src="{{ trustSrc(browser) }}"></iframe>
      <iframe id="viewed" ng-src="{{ trustSrc(viewed) }}"></iframe>
    </div>

    <script src="http://s3.amazonaws.com/caseusa/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="http://s3.amazonaws.com/caseusa/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="http://s3.amazonaws.com/caseusa/node_modules/velocity/velocity.min.js"></script>
    <script src="http://s3.amazonaws.com/caseusa/node_modules/velocity/velocity.ui.min.js"></script>
    <script>
      var caseapp = angular.module('case', []);
      caseapp.controller('ctl', function($scope, $sce) {
        $scope.purl = "RayFinton";
        $scope.viewed = "http://" + $scope.purl + ".caseinpointok.com/viewed.html";
        $scope.browser = "http://" + $scope.purl + ".caseinpointok.com/browser.html";
        $scope.touchEvent = { x0: 0, x1: 0, timestamp: '' }; //variable for swipe event

        $scope.trustSrc = function(src) {
          return $sce.trustAsResourceUrl(src);
        };
        
        $scope.swipeLeft = function(e) {
          if($(e).hasClass('start')) {
            return;
          }
        
          $(e).velocity({
            translateX: ['-130%', '0%'],
            translateZ: [0,0]
          }, { duration: 800 });
        
          $(e).removeClass('inView');
        
          $(e.previousElementSibling).velocity({
            translateX: ['0%', '130%'],
            translateZ: [0,0]
          }, { duration: 800 });
        
          $(e.previousElementSibling).addClass('inView');
        }
        
        $scope.swipeRight = function(e) {
          if($(e).hasClass('end')) {
            return;
          }
        
          $(e).velocity({
            translateX: ['130%', '0%'],
            translateZ: [0,0]
          }, { duration: 800 });
        
          $(e).removeClass('inView');
        
          $(e.nextElementSibling).velocity({
            translateX: ['0%', '-130%'],
            translateZ: [0,0]
          }, { duration: 800 });
        
          $(e.nextElementSibling).addClass('inView');
        }
        
        $scope.rightClickArrow = function(el) {
          var a = document.querySelectorAll('#' + el + ' .floorplan');
        
          for(var i = 0; i < a.length; i++) {
            if($(a[i]).hasClass('inView')) {
              if($(a[i]).hasClass('start') == false) {
                $(a[i]).velocity({
                  translateX: ['-130%', '0%'],
                  translateZ: [0,0]
                }, { duration: 800 });
        
                $(a[i]).removeClass('inView');
                
                $(a[i-1]).velocity({
                  translateX: ['0%', '130%'],
                  translateZ: [0,0]
                }, { duration: 800 });
        
                $(a[i-1]).addClass('inView');
              }
              break;
            }
          }
        }
        
        $scope.leftClickArrow = function(el) {
          var a = document.querySelectorAll('#' + el + ' .floorplan');
        
          for(var i = 0; i < a.length; i++) {
            if($(a[i]).hasClass('inView')) {
              if($(a[i]).hasClass('end') == false) {
                $(a[i]).velocity({
                  translateX: ['130%', '0%'],
                  translateZ: [0,0]
                }, { duration: 800 });
        
                $(a[i]).removeClass('inView');
        
                $(a[i+1]).velocity({
                  translateX: ['0%', '-130%'],
                  translateZ: [0,0]
                }, { duration: 800 });
        
                $(a[i+1]).addClass('inView');
              }
              break;
            }
          }
        }
        
        $scope.addSwipeListener = function() {
          var fp = document.querySelectorAll('.floorplan');
        
          for(var i = 0; i < fp.length; i++) {
            fp[i].addEventListener('touchstart', function(e) {
              if(e.touches.length == 1) { // get ready for possible swipe
                touchEvent.timestamp = e.timeStamp;
                touchEvent.x0 = e.touches[0].screenX;
                touchEvent.x1 = 0;
              } else { // reset 
                touchEvent.x0 = 0;
                touchEvent.x1 = 0;
              }
            });
        
            fp[i].addEventListener('touchend', function(e) {
              if(touchEvent.x0 == 0) {
                return;
              }
        
              if((e.timeStamp - touchEvent.timestamp) > 1500) {
                return;
              }
        
              var el = e.target;
              
              
              if(e.target.tagName == 'IMG') {
                el = e.target.parentElement;
              }
        
              touchEvent.x1 = e.changedTouches[0].screenX;
              var distance = Math.abs(touchEvent.x1 - touchEvent.x0);
        
              if(distance < 80) {
                return;
              }
        
              if(touchEvent.x1 < touchEvent.x0) {
                swipeLeft(el);
                touchEvent.x0 = 0;
                touchEvent.x1 = 0;
                return;
              }
        
              if(touchEvent.x1 > touchEvent.x0) {
                swipeRight(el);
                touchEvent.x0 = 0;
                touchEvent.x1 = 0;
                return;
              }
            });
          }
        }
        
        $scope.noscroll = function() {
          $('body').css({ overflow: 'hidden' });
          $('.screen').css({
            height: innerHeight + 32 + 'px',
            display: 'block'
          });
        }
        
        $scope.addScroll = function() {
          $('body').css({ overflow: 'auto' });
          $('.screen').css({ display: 'none' });
          $('.popup-window').css({ display: 'none' });
        }
        
        $scope.resetModal = function() {
          $('#tourModal iframe').remove();
          $('.glyphicon-refresh').css('display', 'inline-block');
        }
        
        $scope.initform = function(str, index) {
          var sources = [
            "http://" + $scope.purl + ".caseinpointok.com/SouthernHills.html",
            "http://" + $scope.purl + ".caseinpointok.com/ParkTower.html",
            "http://" + $scope.purl + ".caseinpointok.com/RichmondPlaza.html",
            "http://www.caseinpointok.com/gurlSouthernHills.html",
            "http://www.caseinpointok.com/gurlParkTower.html",
            "http://www.caseinpointok.com/gurlRichmondPlaza.html"
          ];

          var ifr = document.createElement('iframe');
          ifr.frameBorder = 0;

          $('.glyphicon-refresh').velocity({ rotateZ: [360,0]}, { duration: 1000, loop: true });
          $('.modal-title').html('Request a tour of ' + str);
        
          ifr.addEventListener('load', function() {
            $('.glyphicon-refresh').css('display', 'none');
            $(ifr).css({
              display: 'block',
              width: '100%',
              height: '400px',
              border: 'none'
            });
          });
        
          if($scope.purl != "") {
            ifr.src = sources[index];
          }
          else if(index == 0) {
            ifr.src = sources[3];
          }
          else if(index == 1) {
            ifr.src = sources[4];
          }
          else if(index == 2) {
            ifr.src = sources[5];
          }
          
          $('#tourModal .modal-body').append(ifr);
        }
        
        $scope.showIframe = function() {
          $('.glyphicon-refresh').css('display', 'none');
          $('iframe').css('display', 'block');
        }
        
        $scope.achieveGoalViewProp = function(prop) {
          var ifr = document.querySelector('iframe#viewed');
          var content = ifr.contentDocument || ifr.contentWindow;
        
          if($scope.purl != '' && $scope.purl != 'facebook' && $scope.purl !== undefined) {
            content.querySelector('#purls ' + prop).click();
          }
          else if($scope.purl == 'facebook')
            content.querySelector('#facebook ' + prop).click();
          else 
            content.querySelector('#gurls ' + prop).click();
        }
        
        $scope.setupReferalModalHandler = function() {
          var ifr = document.querySelector('#referModal iframe');
          var src = ifr.src;
          var referralButtons = document.querySelectorAll('.popup button');
        
          referralButtons.forEach(function(btn, index) {
            btn.addEventListener('click', function() {
              var content = ifr.contentDocument || ifr.contentWindow;
              if(content) {
                content.querySelector('input[name=referrer_property]').value = this.dataset.prop;
              }
            });
          });
        
          $('#referModal #close-modal').click(function() {
            ifr.src = src;
          });
        }

        $scope.setupInputHandlers = function() {
          $('img').on('dragstart', function() {
            return false;
          });
        
          $('.prop-1').click(function() {
            $scope.noscroll();
            $scope.achieveGoalViewProp('#southernhills');
            $('#propertyA').css('display', 'block');
          });
        
          $('#prop-2, .prop-2').click(function() {
            $scope.noscroll();
            $scope.achieveGoalViewProp('#parktower');
            $('#propertyB').css('display', 'block');
          });
        
          $('#prop-3, .prop-3').click(function() {
            $scope.noscroll();
            $scope.achieveGoalViewProp('#richmondplaza');
            $('#propertyC').css('display', 'block');
          });
        
          $('.exit').click($scope.addScroll);
        
          $('.control').click(function(e) {
            e.preventDefault();
            var d = $(e.target).data('direction');
            var el = $(e.target).data('prop');
        
            if(d == 'right') {
              $scope.rightClickArrow(el);
            } else {
              $scope.leftClickArrow(el);
            }
          });
        
          $('#tourModal #close-modal').click($scope.resetModal);
          
          // this is a hack for old samsung browsers not updating radio input onchange
          $('input[type=radio]').on('change', function(ev) {
            $('label').css('display', 'inline-block');
          });
        };

        $scope.addSwipeListener();
        $scope.setupInputHandlers();
        
        try {
          $scope.setupReferalModalHandler();
        } catch (e) {}
      });

      window.onload = function() {
        $('.prop').css({ height: $('.prop:first').innerWidth() + 'px' });
        $('.container-fluid').css('opacity', 1);
      }
    </script>
  </body>
</html>